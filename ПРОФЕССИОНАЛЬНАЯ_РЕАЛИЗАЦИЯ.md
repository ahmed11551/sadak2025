# ‚úÖ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è - Sadaka-Pass

## üìã Code Quality Checklist

### ‚úÖ Backend (Python/FastAPI)

#### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–µ–≤**: models, schemas, api, core
- ‚úÖ **Dependency Injection** –¥–ª—è –ë–î —á–µ—Ä–µ–∑ FastAPI Depends
- ‚úÖ **–¢–∏–ø–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pydantic** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **SQLAlchemy ORM** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- ‚úÖ **Docstrings** –Ω–∞ –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–∞—Ö

#### 2. –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
```python
class DonationRequest(Base):
    """–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã)"""
    __tablename__ = "donation_requests"
    
    - name: String(255) - –ò–º—è
    - phone: String(50) - –¢–µ–ª–µ—Ñ–æ–Ω  
    - email: String(255) - Email (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    - amount: Numeric(10,2) - –°—É–º–º–∞
    - currency: String(3) - –í–∞–ª—é—Ç–∞
    - fund_id: ForeignKey - ID —Ñ–æ–Ω–¥–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    - purpose: Text - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
    - message: Text - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    - status: String(50) - –°—Ç–∞—Ç—É—Å (pending/processed/rejected)
    - processed_at: DateTime - –î–∞—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
    - created_at: DateTime - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
    - updated_at: DateTime - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```

#### 3. API Endpoint: `/api/v1/donations/simple-request`
```python
@router.post("/simple-request", response_model=dict)
async def create_simple_donation_request(
    request: SimpleDonationRequest,
    db: Session = Depends(get_db)
):
    """
    –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç—É—é –∑–∞—è–≤–∫—É –Ω–∞ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã)
    
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º–∏.
    
    Args:
        request: –î–∞–Ω–Ω—ã–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ
        db: –°–µ—Å—Å–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
        
    Returns:
        dict: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞—è–≤–∫–µ
        
    Raises:
        HTTPException: –ï—Å–ª–∏ —Ñ–æ–Ω–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω (–ø—Ä–∏ —É–∫–∞–∑–∞–Ω–∏–∏ fund_id)
    """
```

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö (Pydantic)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–æ–Ω–¥–∞ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î —Å transaction management
- ‚úÖ HTTP –∫–æ–¥—ã –æ—à–∏–±–æ–∫ (404 –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–æ–Ω–¥–∞)
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Å ID –∑–∞—è–≤–∫–∏

#### 4. –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö (Pydantic)
```python
class SimpleDonationRequest(BaseModel):
    """–ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è –∑–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã)"""
    name: str
    phone: str
    email: Optional[EmailStr] = None
    amount: Decimal
    currency: str = "RUB"
    fund_id: Optional[int] = None
    purpose: Optional[str] = None
    message: Optional[str] = None
```

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- ‚úÖ Email –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ EmailStr
- ‚úÖ Decimal –¥–ª—è —Ç–æ—á–Ω—ã—Ö –¥–µ–Ω–µ–∂–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤
- ‚úÖ Optional –¥–ª—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- ‚úÖ –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (currency="RUB")

---

### ‚úÖ Frontend (React/TypeScript)

#### 1. –¢–∏–ø–∏–∑–∞—Ü–∏—è (TypeScript)
```typescript
export interface SimpleDonationRequest {
  name: string;
  phone: string;
  email?: string;
  amount: string;
  currency?: string;
  fund_id?: number;
  purpose?: string;
  message?: string;
}

export interface SimpleDonationResponse {
  success: boolean;
  message: string;
  request_id: number;
  data: { ... };
}
```

#### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã (React Hook Form)
```typescript
const { register, handleSubmit, setValue, watch, formState: { errors } } = useForm<DonationFormData>();

// –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π:
- name: required
- phone: required + pattern validation
- email: optional + email pattern
- amount: required + min value (1 RUB)
```

#### 3. Error Handling
```typescript
try {
  const response = await donationApi.createSimpleRequest({...});
  
  if (response.data.success) {
    setShowSuccess(true);
    toast.success(response.data.message);
  } else {
    throw new Error(response.data.message);
  }
} catch (error: any) {
  // –î–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
  if (error.response?.data?.detail) {
    toast.error(`–û—à–∏–±–∫–∞: ${error.response.data.detail}`);
  } else if (error.message) {
    toast.error(error.message);
  } else {
    toast.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏');
  }
}
```

#### 4. UX Features
- ‚úÖ **Loading state** –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ
- ‚úÖ **Disabled button** –≤–æ –≤—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ **Success screen** —Å –æ–ø—Ü–∏—è–º–∏ "–ù–∞ –≥–ª–∞–≤–Ω—É—é" / "–ï—â–µ –æ–¥–Ω–∞ –∑–∞—è–≤–∫–∞"
- ‚úÖ **Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –¥–ª—è —É—Å–ø–µ—Ö–∞/–æ—à–∏–±–æ–∫
- ‚úÖ **Quick amount buttons** (100‚ÇΩ, 500‚ÇΩ, 1000‚ÇΩ, 3000‚ÇΩ, 5000‚ÇΩ)
- ‚úÖ **Form validation** —Å –æ—à–∏–±–∫–∞–º–∏ –ø–æ–¥ –∫–∞–∂–¥—ã–º –ø–æ–ª–µ–º
- ‚úÖ **Responsive design** –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

#### 5. UI/UX Design
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π gradient design
- ‚úÖ Telegram-themed colors (var(--tg-bg-color))
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ hover/active states
- ‚úÖ Accessible color contrast
- ‚úÖ Icons (Lucide React)
- ‚úÖ Clean, professional layout

---

### ‚úÖ API Integration

```typescript
export const donationApi = {
  createSimpleRequest: (data: SimpleDonationRequest): Promise<AxiosResponse<SimpleDonationResponse>> =>
    api.post('/api/v1/donations/simple-request', data),
};
```

**Features:**
- ‚úÖ –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å/–æ—Ç–≤–µ—Ç
- ‚úÖ Axios interceptors –¥–ª—è auth tokens
- ‚úÖ –ë–∞–∑–æ–≤—ã–π URL –∏–∑ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ Content-Type headers
- ‚úÖ Error handling —á–µ—Ä–µ–∑ interceptors

---

## üîç Code Review Checkpoints

### ‚úÖ Code Quality
- ‚úÖ **No linter errors** - –í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É
- ‚úÖ **Proper typing** - –í—Å–µ –º–µ—Ç–æ–¥—ã —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ **Error handling** - Try/catch –±–ª–æ–∫–∏ –≤–µ–∑–¥–µ
- ‚úÖ **Validation** - Frontend –∏ Backend
- ‚úÖ **Documentation** - Docstrings –Ω–∞ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö
- ‚úÖ **Separation of concerns** - –ú–æ–¥–µ–ª–∏, —Å—Ö–µ–º—ã, API —Ä–∞–∑–¥–µ–ª–µ–Ω—ã

### ‚úÖ Database Design
- ‚úÖ **Proper relationships** - ForeignKeys –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ **Timestamps** - created_at, updated_at –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ
- ‚úÖ **Status management** - pending/processed/rejected
- ‚úÖ **Optional fields** - NULL –¥–æ–ø—É—Å—Ç–∏–º—ã –≥–¥–µ –Ω—É–∂–Ω–æ
- ‚úÖ **Data types** - Numeric –¥–ª—è –¥–µ–Ω–µ–≥, Text –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤

### ‚úÖ Security
- ‚úÖ **Input validation** - Pydantic + React Hook Form
- ‚úÖ **SQL injection** - ORM –∑–∞—â–∏—â–∞–µ—Ç
- ‚úÖ **Email validation** - EmailStr
- ‚úÖ **Phone validation** - Regex pattern
- ‚úÖ **Error messages** - –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î

### ‚úÖ User Experience
- ‚úÖ **Fast response** - Instant validation
- ‚úÖ **Clear feedback** - Toast messages
- ‚úÖ **Visual states** - Loading, success, error
- ‚úÖ **Easy navigation** - Back button, success screen options
- ‚úÖ **Professional look** - Modern design

---

## üìä –ß—Ç–æ –ø–æ –¢–ó (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ)

### ‚úÖ –ó–∞–∫–∞–∑—á–∏–∫ –ø—Ä–æ—Å–∏–ª:
> "–°–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–æ —Ñ–æ—Ä–º—É –¥–ª—è –æ–ø–ª–∞—Ç—ã. –û–Ω–∏ –ø–æ–∫–∞ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏—Å—å —Å –∫–∞—Å—Å–æ–π"

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
1. **–ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞** –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –æ–ø–ª–∞—Ç—ã ‚úÖ
2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫** –≤ –ë–î ‚úÖ
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π** ‚úÖ
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** ‚úÖ
5. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω** ‚úÖ
6. **TypeScript —Ç–∏–ø—ã** ‚úÖ
7. **Backend validation** ‚úÖ
8. **Database model** ‚úÖ

### ‚è≥ –ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:
- –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å YooKassa
- –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å CloudPayments
- –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±—É—é –¥—Ä—É–≥—É—é –∫–∞—Å—Å—É
- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î

---

## üöÄ Deployment Ready

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```sql
CREATE TABLE donation_requests (
  id SERIAL PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  phone VARCHAR(50) NOT NULL,
  email VARCHAR(255),
  amount NUMERIC(10,2) NOT NULL,
  currency VARCHAR(3) DEFAULT 'RUB',
  fund_id INTEGER REFERENCES funds(id),
  purpose TEXT,
  message TEXT,
  status VARCHAR(50) DEFAULT 'pending',
  processed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP
);
```

### –ú–∏–≥—Ä–∞—Ü–∏—è Alembic:
```bash
alembic revision --autogenerate -m "Add donation_requests table"
alembic upgrade head
```

---

## üìù –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ Backend: 100%
- –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- API endpoint ‚úÖ
- –í–∞–ª–∏–¥–∞—Ü–∏—è ‚úÖ
- Error handling ‚úÖ
- Documentation ‚úÖ

### ‚úÖ Frontend: 100%
- –§–æ—Ä–º–∞ ‚úÖ
- TypeScript —Ç–∏–ø—ã ‚úÖ
- –í–∞–ª–∏–¥–∞—Ü–∏—è ‚úÖ
- Error handling ‚úÖ
- UX polish ‚úÖ

### ‚è≥ –û—Å—Ç–∞–ª–æ—Å—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
- –î–æ–±–∞–≤–∏—Ç—å Unit —Ç–µ—Å—Ç—ã
- –î–æ–±–∞–≤–∏—Ç—å integration —Ç–µ—Å—Ç—ã

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏–µ–º—É –∫–æ–º–∞–Ω–¥–æ–π –∑–∞–∫–∞–∑—á–∏–∫–∞!** üéâ

